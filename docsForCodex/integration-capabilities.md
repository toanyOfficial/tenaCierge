# 통신/결제 연동 지원 범위 및 사전 준비물

이 문서는 계좌이체, 문자(SMS), 카카오톡/채널 메시지, 푸시 알람과 관련해 에이전트가 구현할 수 있는 범위와 필요 입력 정보를 정리합니다. **코드는 작성하지 않고 설명만 제공합니다.**

## 공통 사항
- **에이전트가 할 수 있는 일**: 주어진 SDK/REST API 명세에 따라 서버 코드를 작성하고, 인증/요청/콜백 처리 로직을 추가하며, 테스트·운영 환경 분리, 에러 로깅, 재시도·리포트 저장 등을 설계·구현합니다.
- **사용자가 제공해야 할 것**: 실제 서비스 자격 증명(키·비밀·인증서), 테스트/운영 엔드포인트, 계약된 요금제 정보, 필요한 비즈니스 제약(일일 한도, 화이트리스트 IP 등), 알림·정산 정책, 샌드박스 계정.
- **보안/운영**: 비밀정보는 `.env` 등 환경변수로 전달, IP 화이트리스트·콜백 검증 해시 등 요구사항 공유가 필요합니다.

## 1) 계좌이체(계좌이체 API, 오픈뱅킹 등)
- **구현 가능 범위**
  - REST/SDK 기반 이체 요청, 잔액 조회, 거래내역 조회, 수취인 검증, 영수증/거래 ID 저장.
  - 콜백(거래 결과·취소·반환) 수신 및 검증, 서명/시그니처 검증 로직 구현.
  - 재시도/중복 방지(멱등키), 거래 상태 폴링, 일별 정산 리포트 저장.
  - 장애 대응: 실패 코드 매핑, 에러 로깅(etc_errorLogs), 알림 연계(SMS/푸시 등) 설계.
- **사용자가 제공해야 할 정보**
  - 발급된 클라이언트 ID/시크릿, 앱 키, 기관코드, 가맹점번호 등 인증 파라미터.
  - TLS/전자서명에 필요한 인증서/개인키, 시그니처 생성 방식, 암호화 스펙.
  - 테스트/운영 베이스 URL, 콜백 수신용 도메인·경로, IP 화이트리스트 요구사항.
  - 이체 한도, 승인 프로세스(1원 인증, 실명 확인 여부), 정산·수수료 정책.

## 2) 문자메시지(SMS/LMS/MMS)
- **구현 가능 범위**
  - 국내/글로벌 SMS 게이트웨이(Twilio, Toast, 알리고 등) SDK 또는 REST API 연동.
  - 템플릿/발신번호 관리, 발송 요청 큐잉, 실패 코드별 재시도/대체채널(Fallback) 설계.
  - 수신 거부/스팸 필터 대응(080 수신거부, 발신번호 사전등록) 관련 로직.
  - 발송/수신 결과 콜백 처리, 리포트 저장, 에러 로깅 및 모니터링.
- **사용자가 제공해야 할 정보**
  - SMS 서비스 계정의 API 키/시크릿, 발신번호(사전등록 완료본), 과금/요금제 정책.
  - 템플릿 ID/문안, 허용 국가/번호 포맷, 080 수신거부 콜백 URL 요구사항.
  - 테스트/운영 엔드포인트, 메시지 길이 제한, 대량 발송 시 정책(QPS, 동시성 제한).

## 3) 카카오톡 메시지(알림톡/친구톡) 및 카카오 채널 메시지
- **구현 가능 범위**
  - 카카오 비즈메시지(알림톡/친구톡) 발송 API, 채널 추가 메시지, 템플릿 검증 호출.
  - 카카오 OAuth/채널 인증 토큰 관리, 만료/갱신 로직, IP·시그니처 검증 처리.
  - 메시지 템플릿 변수 치환, 버튼(웹/앱 링크) 구성, 발송/수신 결과 콜백 처리.
  - 알림톡 실패 시 친구톡/SMS 대체 발송 플로우 설계, 에러 코드별 대응.
- **사용자가 제공해야 할 정보**
  - 카카오 디벨로퍼스 앱 키(REST/JavaScript), 채널/비즈니스 채널 인증 키, 템플릿 코드.
  - 발신 프로필 키, 친구톡 사용 시 채널 친구 대상 정책, 광고성 문구/수신 동의 여부.
  - 테스트/운영 엔드포인트, 콜백 검증 방식, 허용 IP 목록.

## 4) 푸시 알람(모바일/웹)
- **구현 가능 범위**
  - FCM/APNs/웹푸시(VAPID) 연동, 토큰 등록·무효화, 주제/토픽 발송, 데이터 메시지.
  - 플랫폼별 우선순위/TTL/배지/사운드/클릭액션 설정, 다국어·다채널 메시징.
  - 실패 코드 처리(토큰 만료/차단), 재등록 유도, 대량 발송 시 큐잉/백오프 설계.
  - 서버 로그/리포트 저장, 사용자별 알림 설정(옵트인/옵트아웃) 반영.
- **사용자가 제공해야 할 정보**
  - FCM 서버 키 또는 서비스 계정 JSON, APNs .p8 키/Team ID/Key ID/Bundle ID, 웹푸시 VAPID 키 쌍.
  - 패키지/번들 ID, 푸시 허용 정책, 알림 카테고리/채널 설정(Android), 아이콘/사운드 자원.
  - 테스트/운영 구분(토픽/패키지), 전송 제한(QPS)과 장애 대응 정책.
