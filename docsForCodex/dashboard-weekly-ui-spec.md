# 대시보드 - 주간업무 UI 명세

대시보드-주간업무 화면을 구성하는 주요 레이아웃과 데이터 동기화 주기, 시간 기반 디자인 전환 규칙을 정리한다.

## 컴포넌트 정의

### 1. 요약 그리드 (Summary Grid)
- **역할**: 요일별 총 건수와 섹터별 건수 패턴을 표시한다.
- **업데이트 주기**: `/api/dashboard/admin-weekly` 스냅샷과 함께 10분 간격으로 새로고침된다. 초기 진입 시 즉시 로드한다.
- **시간별 디자인 변경내용**: 레이아웃 모드(오늘/내일 우선)에 따라 카드 너비가 달라질 뿐, 내부 셀 디자인은 동일하다.
- **기타**: 날짜는 `YYYY-MM-DD(요일)` 형태로 표시하며, 섹터 건수는 `/` 구분자로 합산된다.

### 2. D0 업무 진행 카드 (Today Work Card)
- **역할**: 당일 진행 중인 섹터·건물별 배정/청소/검수 상태를 스택형 막대와 호실 카드로 보여준다.
- **업데이트 주기**: 실시간으로 표시되며 10분마다 데이터 스냅샷을 재요청한다. 레이아웃 모드는 1분 간격으로 현재 시각을 확인해 자동 동기화한다.
- **시간별 디자인 변경내용**:
  - 15:30 이전에는 이 카드가 우선 레이아웃(`todayDominant`)으로 넓게 표시된다.
  - 15:30 이후에는 자동으로 축소(`compactCard`)되며, D+1 카드가 확장된다. 사용자가 토글 버튼으로 수동 전환할 수 있고, 1분마다 시각을 재검사해 자동 동기화를 유지한다.
  - 축소 상태(`tomorrowDominant`)에서는 컴팩트 리스트 + 페이징 UI로 대체된다. 컴팩트 리스트는 한 페이지에 들어가는 행 수를 컨테이너 높이로 계산하고, 여러 페이지일 경우 1분마다 자동 순환한다.
- **기타**:
  - 호실 상태 단계는 `배`(배정 여부), `담`(담당자 배정 및 노쇼 감지), `청`(청소 진행률), `검`(검수 여부)로 표시하며 색상 클래스는 단계별 플래그로 결정된다.
  - D0 카드가 확장된 상태에서는 섹터·건물별 스택형 진행 바와 최대 36개의 호실 카드(비어 있으면 플레이스홀더)를 보여준다.

### 3. D+1 준비 현황 카드 (Tomorrow Prep Card)
- **역할**: 익일 예약된 섹터·건물별 총량 대비 완료 수, 그리고 예약/배치 목록을 보여주는 배치 모니터링 카드.
- **업데이트 주기**: `/api/dashboard/admin-weekly` 응답 기준으로 10분마다 갱신된다. 화면 메타에는 30분 주기 안내 문구가 표시되지만 실제 데이터는 10분 주기로 재호출된다.
- **시간별 디자인 변경내용**:
  - 15:30 이후 기본 레이아웃에서 이 카드가 확장(`dominantCard`)되고 D0 카드가 축소된다.
  - 15:30 이전에는 축소(`compactCard`) 상태로 표시된다. 크기 외의 스타일 변화는 없다.
- **기타**: 진행 바에는 섹터별 진행률 마커와 건물별 색상 세그먼트가 표시되며, 예약/배치 리스트는 상태 배지와 함께 세로로 나열된다.

### 4. 컴팩트 섹터 요약 (Compact Sector Summary)
- **역할**: 축소 레이아웃에서 진행 중인 섹터별 건수를 텍스트 라인으로 나열해 빠르게 파악하도록 돕는다.
- **업데이트 주기**: D0 카드와 동일하게 10분마다 새 스냅샷을 수신하며, 자동 페이징 로직도 동일하게 적용된다.
- **시간별 디자인 변경내용**: 레이아웃이 `tomorrowDominant`일 때만 노출된다.
- **기타**: 진행 중인 호실이 없으면 “오늘 하루도 수고하셨습니다.” 메시지가 나타난다.

### 5. 레이아웃 토글 버튼
- **역할**: 사용자가 D0 우선(8:2) / D+1 우선(2:8) 뷰를 수동으로 전환할 수 있는 플로팅 버튼.
- **업데이트 주기**: 버튼 자체는 고정이지만, 클릭 시 상태가 즉시 전환된다. 자동 동기화 타이머는 매 분 현재 시각을 체크해 15:30 기준 기본 모드를 재적용한다.
- **시간별 디자인 변경내용**: 버튼 레이블은 ‘D+1가 넓게 보기 (8:2)’ 또는 ‘D0가 넓게 보기 (2:8)’으로 현재 상태에 맞춰 변경된다.
- **기타**: 레이아웃 모드는 상태 기반이라 새로고침 시에도 15:30 기준 규칙을 따라 초기화된다.

## 데이터 스냅샷 구성요소
- **Summary**: 요일·날짜별 섹터 건수 배열.
- **todayProgress / tomorrowProgress**: 섹터 코드·이름, 건물별 총량/완료 수로 구성된 진행률 데이터.
- **roomStatuses**: 섹터, 건물, 호실, 배정/청소/검수 플래그, 소유주 정보를 포함한다.
- **tomorrowApply**: 익일 예약/배치 행(제목, 부제, 상태 배지).
- **capturedAt**: 현재 스냅샷의 기준 시각으로, 요약·D0·D+1 카드 모두 동일하게 사용된다.
